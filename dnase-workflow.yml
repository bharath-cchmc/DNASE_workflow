#!/usr/bin/env cwl-runner
cwlVersion: v1.0

class: Workflow

requirements:
- class: MultipleInputFeatureRequirement
- class: SubworkflowFeatureRequirement
- class: InlineJavascriptRequirement

doc: |
  Step 1: Convert the BAM to BED
  Step 2: remove needless column and change the order by awk
      s:name: "Barski Lab"

inputs:
  bamfile:
    type: File

  output_name:
    type: string

outputs:
  output:
    type: File
    outputSource: sed_component/output

steps:
  bamtobed:
    run: bedtools-bamtobed.yml
    in:
      bamfile: bamfile
      output_name: output_name
    out: [output]

  awk_component:
    run: awk_component.yml
    in:
      input: bamtobed/output
    out: [output]

  sed_component:
    run: sed_component.yml
    in:
      input: awk_component/output
    out: [output]

  