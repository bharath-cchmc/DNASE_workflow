cwlVersion: v1.0

baseCommand: [awk]

class: CommandLineTool

requirements:
- class: InlineJavascriptRequirement
- class: ShellCommandRequirement

inputs:
  input:
    type: File
    doc: |
      Input BAM file
    inputBinding:
      position: 2
      shellQuote: false

  input2:
    type: File?
    doc: |
      Input BAM file
    inputBinding:
      position: 3
      shellQuote: false
      valueFrom: |
       ${
         var r = '| uniq | while read chr; do sed -n /${chr}[[:blank:]]/p'
         return r;
        }

outputs:
  output:
    type: File[]
    outputBinding:
      glob: $("^.txt")

arguments:
   - valueFrom: |
      ${
        var r = '{print $1 }';
        return r
      }
     position: 1

   - valueFrom: |
      ${
        var r0 = inputs.input.nameroot
        var r = '_${chr}.txt; done'
        return r0+r
      }
     shellQuote: false
     prefix: ">"
     position: 4